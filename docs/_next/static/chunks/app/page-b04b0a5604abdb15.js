(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7278:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eP});var a=s(5155),r=s(2115),n=s(9876);let i=()=>(0,a.jsx)(n.A,{className:"h-8 w-8 text-primary"});var l=s(221),d=s(2177),o=s(5594),c=s(4301),m=s(9708),p=s(2085),u=s(9434);let f=(0,p.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:i=!1,...l}=e,d=i?m.DX:"button";return(0,a.jsx)(d,{className:(0,u.cn)(f({variant:r,size:n,className:s})),ref:t,...l})});x.displayName="Button";let h=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});h.displayName="Input";var g=s(968);let b=(0,p.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.b,{ref:t,className:(0,u.cn)(b(),s),...r})});j.displayName=g.b.displayName;let v=d.Op,N=r.createContext({}),y=e=>{let{...t}=e;return(0,a.jsx)(N.Provider,{value:{name:t.name},children:(0,a.jsx)(d.xI,{...t})})},w=()=>{let e=r.useContext(N),t=r.useContext(A),{getFieldState:s,formState:a}=(0,d.xW)(),n=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},A=r.createContext({}),I=r.forwardRef((e,t)=>{let{className:s,...n}=e,i=r.useId();return(0,a.jsx)(A.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,u.cn)("space-y-2",s),...n})})});I.displayName="FormItem";let R=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:n,formItemId:i}=w();return(0,a.jsx)(j,{ref:t,className:(0,u.cn)(n&&"text-destructive",s),htmlFor:i,...r})});R.displayName="FormLabel";let C=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:n,formDescriptionId:i,formMessageId:l}=w();return(0,a.jsx)(m.DX,{ref:t,id:n,"aria-describedby":r?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!r,...s})});C.displayName="FormControl";let S=r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:n}=w();return(0,a.jsx)("p",{ref:t,id:n,className:(0,u.cn)("text-sm text-muted-foreground",s),...r})});S.displayName="FormDescription";let P=r.forwardRef((e,t)=>{var s;let{className:r,children:n,...i}=e,{error:l,formMessageId:d}=w(),o=l?String(null!=(s=null==l?void 0:l.message)?s:""):n;return o?(0,a.jsx)("p",{ref:t,id:d,className:(0,u.cn)("text-sm font-medium text-destructive",r),...i,children:o}):null});P.displayName="FormMessage";var k=s(7481);let T=o.z.object({name:o.z.string().min(1,{message:"Participant name cannot be empty."}).max(50,{message:"Name too long."})});function E(e){let{onAddParticipant:t,existingParticipantNames:s}=e,{toast:r}=(0,k.dj)(),n=(0,d.mN)({resolver:(0,l.u)(T.refine(e=>!s.map(e=>e.toLowerCase()).includes(e.name.toLowerCase()),{message:"Participant name already exists.",path:["name"]})),defaultValues:{name:""}});return(0,a.jsx)(v,{...n,children:(0,a.jsxs)("form",{onSubmit:n.handleSubmit(function(e){t(e.name),r({title:"Participant Added",description:"".concat(e.name," has been added to the list.")}),n.reset()}),className:"flex items-end gap-2",children:[(0,a.jsx)(y,{control:n.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{className:"flex-grow",children:[(0,a.jsx)(R,{children:"Participant Name"}),(0,a.jsx)(C,{children:(0,a.jsx)(h,{placeholder:"Enter name (e.g., Alice)",...t})}),(0,a.jsx)(P,{})]})}}),(0,a.jsx)(x,{type:"submit",size:"icon","aria-label":"Add participant",children:(0,a.jsx)(c.A,{className:"h-5 w-5"})})]})})}let D=(0,p.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function F(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,u.cn)(D({variant:s}),t),...r})}var z=s(4371);function _(e){let{participants:t,onRemoveParticipant:s}=e;return 0===t.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-4",children:"No participants added yet. Add some to get started!"}):(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Current Participants:"}),(0,a.jsx)("ul",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)(F,{variant:"secondary",className:"text-base py-1 px-3 flex items-center gap-2 group",children:[e.name,(0,a.jsx)(x,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-50 group-hover:opacity-100 hover:bg-destructive/20 hover:text-destructive",onClick:()=>s(e.id),"aria-label":"Remove ".concat(e.name),children:(0,a.jsx)(z.A,{className:"h-4 w-4"})})]})},e.id))})]})}var M=s(8215),O=s(9556),W=s(7381),V=s(518);let L=M.bL;M.YJ;let U=M.WT,B=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(M.l9,{ref:t,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,a.jsx)(M.In,{asChild:!0,children:(0,a.jsx)(O.A,{className:"h-4 w-4 opacity-50"})})]})});B.displayName=M.l9.displayName;let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(M.PP,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(W.A,{className:"h-4 w-4"})})});$.displayName=M.PP.displayName;let q=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(M.wn,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(O.A,{className:"h-4 w-4"})})});q.displayName=M.wn.displayName;let H=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...i}=e;return(0,a.jsx)(M.ZL,{children:(0,a.jsxs)(M.UC,{ref:t,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,a.jsx)($,{}),(0,a.jsx)(M.LM,{className:(0,u.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(q,{})]})})});H.displayName=M.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(M.JU,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=M.JU.displayName;let J=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(M.q7,{ref:t,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(M.VF,{children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})}),(0,a.jsx)(M.p4,{children:r})]})});J.displayName=M.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(M.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=M.wv.displayName;let X=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});X.displayName="Textarea";var G=s(6981);let K=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(G.bL,{ref:t,className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(G.C1,{className:(0,u.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})})});K.displayName=G.bL.displayName;var Y=s(7655);let Q=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(Y.bL,{ref:t,className:(0,u.cn)("relative overflow-hidden",s),...n,children:[(0,a.jsx)(Y.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(Z,{}),(0,a.jsx)(Y.OK,{})]})});Q.displayName=Y.bL.displayName;let Z=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...n}=e;return(0,a.jsx)(Y.VM,{ref:t,orientation:r,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,a.jsx)(Y.lr,{className:"relative flex-1 rounded-full bg-border"})})});Z.displayName=Y.VM.displayName;let ee=o.z.object({payerId:o.z.string().min(1,{message:"Please select a payer."}),amount:o.z.coerce.number().positive({message:"Amount must be positive."}),description:o.z.string().min(1,{message:"Description cannot be empty."}).max(100,{message:"Description too long."}),splitWithParticipantIds:o.z.array(o.z.string()).default([])});function et(e){let{participants:t,onAddExpense:s}=e,{toast:n}=(0,k.dj)(),i=(0,d.mN)({resolver:(0,l.u)(ee),defaultValues:{payerId:"",amount:0,description:"",splitWithParticipantIds:[]}});r.useEffect(()=>{t.length>0&&i.getValues("payerId")&&!t.find(e=>e.id===i.getValues("payerId"))&&i.resetField("payerId"),0===t.length&&i.getValues("payerId")&&i.resetField("payerId");let e=i.getValues("splitWithParticipantIds"),s=e.filter(e=>t.some(t=>t.id===e));e.length!==s.length&&i.setValue("splitWithParticipantIds",s)},[t,i]);let o=t.length>0;return(0,a.jsx)(v,{...i,children:(0,a.jsxs)("form",{onSubmit:i.handleSubmit(function(e){var a;s(e.payerId,e.amount,e.description,e.splitWithParticipantIds);let r=(null==(a=t.find(t=>t.id===e.payerId))?void 0:a.name)||"Someone";n({title:"Expense Added",description:"".concat(r," paid $").concat(e.amount.toFixed(2),' for "').concat(e.description,'".')}),i.reset()}),className:"space-y-4",children:[(0,a.jsx)(y,{control:i.control,name:"payerId",render:e=>{let{field:s}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(R,{children:"Paid by"}),(0,a.jsxs)(L,{onValueChange:s.onChange,value:s.value,disabled:!o,children:[(0,a.jsx)(C,{children:(0,a.jsx)(B,{children:(0,a.jsx)(U,{placeholder:o?"Select who paid":"Add participants first"})})}),(0,a.jsx)(H,{children:t.map(e=>(0,a.jsx)(J,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(P,{})]})}}),(0,a.jsx)(y,{control:i.control,name:"amount",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(R,{children:"Amount ($)"}),(0,a.jsx)(C,{children:(0,a.jsx)(h,{type:"number",placeholder:"0.00",...t,step:"0.01",disabled:!o})}),(0,a.jsx)(P,{})]})}}),(0,a.jsx)(y,{control:i.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(R,{children:"Description"}),(0,a.jsx)(C,{children:(0,a.jsx)(X,{placeholder:"e.g., Dinner, Groceries",...t,disabled:!o})}),(0,a.jsx)(P,{})]})}}),(0,a.jsx)(y,{control:i.control,name:"splitWithParticipantIds",render:()=>(0,a.jsxs)(I,{children:[(0,a.jsx)(R,{children:"Split with"}),(0,a.jsx)(S,{children:"Select who shares this expense. If none selected, it's split among all."}),(0,a.jsx)(Q,{className:"h-32 w-full rounded-md border p-2",children:(0,a.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,a.jsx)(y,{control:i.control,name:"splitWithParticipantIds",render:t=>{var s;let{field:r}=t;return(0,a.jsxs)(I,{className:"flex flex-row items-center space-x-3 space-y-0",children:[(0,a.jsx)(C,{children:(0,a.jsx)(K,{checked:null==(s=r.value)?void 0:s.includes(e.id),onCheckedChange:t=>{var s;return t?r.onChange([...r.value,e.id]):r.onChange(null==(s=r.value)?void 0:s.filter(t=>t!==e.id))},disabled:!o,"aria-label":"Split with ".concat(e.name)})}),(0,a.jsx)(R,{className:"font-normal",children:e.name})]},e.id)}},e.id))})}),(0,a.jsx)(P,{})]})}),(0,a.jsxs)(x,{type:"submit",disabled:!o,className:"w-full",children:[(0,a.jsx)(c.A,{className:"mr-2 h-5 w-5"})," Add Expense"]})]})})}let es=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,u.cn)("w-full caption-bottom text-sm",s),...r})})});es.displayName="Table";let ea=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,u.cn)("[&_tr]:border-b",s),...r})});ea.displayName="TableHeader";let er=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,u.cn)("[&_tr:last-child]:border-0",s),...r})});er.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let en=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});en.displayName="TableRow";let ei=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});ei.displayName="TableHead";let el=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});el.displayName="TableCell";let ed=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",s),...r})});ed.displayName="TableCaption";var eo=s(7223),ec=s(9613);let em=ec.Kq,ep=ec.bL,eu=ec.l9,ef=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(ec.UC,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});function ex(e){let{expenses:t,participants:s,onRemoveExpense:r}=e,n=e=>{var t;return(null==(t=s.find(t=>t.id===e))?void 0:t.name)||"Unknown"},i=e=>{if(!e.splitWithParticipantIds||0===e.splitWithParticipantIds.length)return"All participants";let t=e.splitWithParticipantIds.map(e=>{var t;return null==(t=s.find(t=>t.id===e))?void 0:t.name}).filter(e=>!!e);return 0===t.length?"Selected participants (removed)":t.length===s.length?"All participants":t.join(", ")};return 0===t.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-4 text-center py-4",children:"No expenses recorded yet."}):(0,a.jsx)(em,{children:(0,a.jsx)("div",{className:"mt-2 rounded-md border",children:(0,a.jsxs)(es,{children:[(0,a.jsx)(ea,{children:(0,a.jsxs)(en,{children:[(0,a.jsx)(ei,{children:"Paid By"}),(0,a.jsx)(ei,{children:"Description"}),(0,a.jsx)(ei,{className:"text-right",children:"Amount"}),(0,a.jsx)(ei,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(er,{children:t.map(e=>(0,a.jsxs)(en,{children:[(0,a.jsx)(el,{children:n(e.payerId)}),(0,a.jsxs)(el,{children:[e.description,(0,a.jsxs)(ep,{delayDuration:300,children:[(0,a.jsx)(eu,{asChild:!0,children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground cursor-default truncate hover:overflow-visible hover:whitespace-normal",children:["Split with: ",i(e)]})}),(0,a.jsx)(ef,{side:"bottom",align:"start",className:"max-w-xs",children:(0,a.jsxs)("p",{className:"text-sm",children:["This expense is split with: ",i(e),"."]})})]})]}),(0,a.jsxs)(el,{className:"text-right",children:["$",e.amount.toFixed(2)]}),(0,a.jsx)(el,{className:"text-right",children:(0,a.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>r(e.id),"aria-label":"Remove expense: ".concat(e.description),className:"hover:text-destructive",children:(0,a.jsx)(eo.A,{className:"h-4 w-4"})})})]},e.id))}),t.length>5&&(0,a.jsx)(ed,{children:"A list of all recorded expenses."})]})})})}ef.displayName=ec.UC.displayName;let eh=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});eh.displayName="Card";let eg=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",s),...r})});eg.displayName="CardHeader";let eb=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});eb.displayName="CardTitle";let ej=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",s),...r})});ej.displayName="CardDescription";let ev=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("p-6 pt-0",s),...r})});ev.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var eN=s(9968);function ey(e){let{debts:t}=e;return 0===t.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-4 text-center py-4",children:"No debts to settle, or not enough information to calculate."}):(0,a.jsx)("div",{className:"space-y-3 mt-4",children:t.map((e,t)=>(0,a.jsx)(eh,{className:"shadow-sm hover:shadow-md transition-shadow",children:(0,a.jsxs)(ev,{className:"p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm md:text-base",children:[(0,a.jsx)("span",{className:"font-medium text-destructive",children:e.from}),(0,a.jsx)(eN.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium text-primary",children:e.to})]}),(0,a.jsxs)("span",{className:"font-semibold text-accent",children:["$",e.amount.toFixed(2)]})]})},t))})}var ew=s(7489);let eA=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(ew.b,{ref:t,decorative:n,orientation:r,className:(0,u.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...i})});eA.displayName=ew.b.displayName;var eI=s(286),eR=s(8114),eC=s(3422);let eS=()=>Date.now().toString(36)+Math.random().toString(36).substring(2,9);function eP(){let[e,t]=r.useState([]),[s,n]=r.useState([]),[l,d]=r.useState([]),{toast:o}=(0,k.dj)();return(0,a.jsxs)("div",{className:"min-h-screen bg-background flex flex-col items-center p-4 md:p-8",children:[(0,a.jsxs)("header",{className:"w-full max-w-4xl mb-8 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[(0,a.jsx)(i,{}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-primary",children:"Bill Balancer"})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Easily split expenses and see who owes whom."})]}),(0,a.jsxs)("main",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(eh,{className:"shadow-lg",children:[(0,a.jsxs)(eg,{children:[(0,a.jsxs)(eb,{className:"flex items-center",children:[(0,a.jsx)(eI.A,{className:"mr-2 h-6 w-6 text-primary"}),"Participants"]}),(0,a.jsx)(ej,{children:"Add friends who are part of this bill."})]}),(0,a.jsxs)(ev,{children:[(0,a.jsx)(E,{onAddParticipant:e=>{let s={id:eS(),name:e};t(e=>[...e,s]),d([])},existingParticipantNames:e.map(e=>e.name)}),(0,a.jsx)(_,{participants:e,onRemoveParticipant:s=>{let a=e.find(e=>e.id===s);t(e=>e.filter(e=>e.id!==s)),n(e=>{let t=e.filter(e=>e.payerId!==s);return t.map(e=>{var t;return{...e,splitWithParticipantIds:null==(t=e.splitWithParticipantIds)?void 0:t.filter(e=>e!==s)}})}),d([]),a&&o({title:"Participant Removed",description:"".concat(a.name," and their associated expenses/splits have been updated."),variant:"destructive"})}})]})]}),(0,a.jsxs)(eh,{className:"shadow-lg",children:[(0,a.jsxs)(eg,{children:[(0,a.jsxs)(eb,{className:"flex items-center",children:[(0,a.jsx)(eR.A,{className:"mr-2 h-6 w-6 text-primary"}),"Expenses"]}),(0,a.jsx)(ej,{children:"Log who paid for what and who to split with."})]}),(0,a.jsxs)(ev,{children:[(0,a.jsx)(et,{participants:e,onAddExpense:(e,t,s,a)=>{let r={id:eS(),payerId:e,amount:t,description:s,splitWithParticipantIds:a};n(e=>[...e,r]),d([])}}),(0,a.jsx)(ex,{expenses:s,participants:e,onRemoveExpense:e=>{let t=s.find(t=>t.id===e);n(t=>t.filter(t=>t.id!==e)),d([]),t&&o({title:"Expense Removed",description:'Expense "'.concat(t.description,'" has been removed.'),variant:"destructive"})}})]})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(eh,{className:"shadow-lg sticky top-8",children:[" ",(0,a.jsxs)(eg,{children:[(0,a.jsxs)(eb,{className:"flex items-center",children:[(0,a.jsx)(eC.A,{className:"mr-2 h-6 w-6 text-primary"}),"Debt Summary"]}),(0,a.jsx)(ej,{children:"Who owes whom and how much."})]}),(0,a.jsxs)(ev,{children:[(0,a.jsxs)(x,{onClick:()=>{if(e.length<2&&s.length>0){o({title:"Needs more participants",description:"Add at least two participants to see how debts are split. If only one participant paid, they owe nothing to others.",variant:"destructive"}),d([]);return}if(0===e.length&&s.length>0){o({title:"No participants",description:"Add participants to calculate debts.",variant:"destructive"}),d([]);return}if(0===s.length&&e.length>0){o({title:"No Expenses",description:"Add some expenses to calculate who owes whom.",variant:"default"}),d([]);return}let t=function(e,t){if(0===e.length&&t.length>0||e.length<1)return[];let s=new Map(e.map(e=>[e.id,e.name])),a=new Map;for(let t of e)a.set(t.id,0);for(let r of t){let t;if(!s.has(r.payerId))continue;let n=a.get(r.payerId)||0;if(a.set(r.payerId,n+r.amount),(t=r.splitWithParticipantIds&&r.splitWithParticipantIds.length>0?r.splitWithParticipantIds.filter(e=>s.has(e)):e.map(e=>e.id)).length>0){let e=r.amount/t.length;for(let s of t){let t=a.get(s)||0;a.set(s,t-e)}}}let r=[];for(let[e,t]of a.entries())Math.abs(t)>.001&&r.push({participantId:e,name:s.get(e)||"Unknown Participant",balance:t});let n=r.filter(e=>e.balance<0).map(e=>({...e,balance:-e.balance})).sort((e,t)=>t.balance-e.balance),i=r.filter(e=>e.balance>0).sort((e,t)=>t.balance-e.balance),l=[],d=0,o=0;for(;d<n.length&&o<i.length;){let e=n[d],t=i[o],s=Math.min(e.balance,t.balance);s>.001&&l.push({from:e.name,to:t.name,amount:s}),e.balance-=s,t.balance-=s,e.balance<.01&&d++,t.balance<.01&&o++}return l}(e,s);d(t),t.length>0?o({title:"Debts Calculated!",description:"Check the summary below."}):s.length>0?o({title:"All Settled!",description:"Looks like everyone is even, or no debts to show."}):e.length>0&&s.length},className:"w-full mb-4",disabled:0===e.length&&0===s.length,children:[(0,a.jsx)(eC.A,{className:"mr-2 h-5 w-5"})," Calculate Debts"]}),(0,a.jsx)(ey,{debts:l}),(e.length>0||s.length>0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eA,{className:"my-6"}),(0,a.jsxs)(x,{onClick:()=>{t([]),n([]),d([]),o({title:"Reset Complete",description:"All participants, expenses, and debts have been cleared.",variant:"destructive"})},variant:"destructive",className:"w-full",children:[(0,a.jsx)(eo.A,{className:"mr-2 h-5 w-5"})," Reset All"]})]})]})]})})]}),(0,a.jsx)("footer",{className:"w-full max-w-4xl mt-12 text-center text-sm text-muted-foreground",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Bill Balancer. Simplify your shared expenses."]})})]})}},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>p});var a=s(2115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=l(o,e),d.forEach(e=>{e(o)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8748:(e,t,s)=>{Promise.resolve().then(s.bind(s,7278))},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[725,140,441,684,358],()=>t(8748)),_N_E=e.O()}]);